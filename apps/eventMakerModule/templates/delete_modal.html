<!-- Delete Confirmation Modal -->
<div
  id="deleteModal"
  class="hidden fixed inset-0 z-50 w-full flex items-center justify-center bg-gray-800 bg-opacity-50"
>
  <div
    id="deleteModalContent"
    class="bg-white rounded-xl shadow-lg w-11/12 sm:w-1/2 lg:w-1/3 max-h-screen overflow-y-auto p-6"
  >
    <!-- Modal header -->
    <div class="flex items-center justify-end pb-3">
      <button
        type="button"
        class="text-gray-400 hover:text-gray-700"
        onclick="hideDeleteModal()"
      >
        âœ•
      </button>
    </div>

    <!-- Modal body -->
    <div class="py-6 text-center">
      <p class="text-gray-700 text-lg mb-3">
        Are you sure you want to delete this event?
      </p>
    </div>

    <!-- Modal footer -->
    <div class="flex justify-end gap-3 pt-4">
      <button
        type="button"
        onclick="hideDeleteModal()"
        class="px-3 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 transition-all"
      >
        Cancel
      </button>
      <button
        type="button"
        id="confirmDeleteButton"
        class="px-3 py-2 bg-red-400 hover:bg-red-500 text-white rounded-md font-medium transition-all"
      >
        Delete
      </button>
    </div>
  </div>
</div>

<script>
  function showDeleteModal() {
    const modal = document.getElementById("deleteModal");
    const modalContent = document.getElementById("deleteModalContent");

    modal.classList.remove("hidden");
    setTimeout(() => {
      modalContent.classList.remove("opacity-0", "scale-95");
      modalContent.classList.add("opacity-100", "scale-100");
    }, 50);
  }

  function hideDeleteModal() {
    const modal = document.getElementById("deleteModal");
    const modalContent = document.getElementById("deleteModalContent");

    modalContent.classList.remove("opacity-100", "scale-100");
    modalContent.classList.add("opacity-0", "scale-95");

    setTimeout(() => {
      modal.classList.add("hidden");
    }, 150);
  }

  async function deleteEvent() {}

  document
    .getElementById("confirmDeleteButton")
    .addEventListener("click", async () => {
      if (!eventId) return;

      try {
        const response = await fetch(`/event-maker/api/delete/${eventId}/`, {
          method: "POST",
          headers: {
            "X-CSRFToken": "{{ csrf_token }}",
          },
        });

        const result = await response.json();

        if (!response.ok) {
          showToast(result.message, "", "error");
          return;
        }

        showToast(result.message, "", "success");
        hideDeleteModal();
        setTimeout(() => {
          window.location.href = "/event/";
        }, 1500);
      } catch (error) {
        console.error("Error:", error);
      }
    });
</script>
